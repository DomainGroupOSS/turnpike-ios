
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Installation | Turnpike</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css"/>
    <link rel="stylesheet" href="_static/yammerdoc.css" type="text/css"/>
    <link rel="top" title="Turnpike" href="index.html"/>
    <link rel="next" title="Enabling Mobile Deeplinking" href="enabling-mobile-deeplinking.html"/>
    <link rel="prev" title="Getting Started" href="index.html"/>
    <style lang="text/css">
        #top-bar, #top-bar small, #top-bar a {
            text-shadow: 0px -1px 0px #182127;
            color: #ffffff;
        }
        
        #top-bar {
            background-color: #363F45;
            background-image: -moz-linear-gradient(top, #545d63, #182127);
            background-image: -ms-linear-gradient(top, #545d63, #182127);
            background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#545d63), to(#182127));
            background-image: -webkit-linear-gradient(top, #545d63, #182127);
            background-image: -o-linear-gradient(top, #545d63, #182127);
            background-image: linear-gradient(top, #545d63, #182127);
            filter: progid:DXImageTransform.Microsoft.gradient(startColorstr = '#545d63', endColorstr = '#182127', GradientType = 0);
            -webkit-border-radius: 0;
            -moz-border-radius: 0;
            border-radius: 0;
        }


        .hero-unit {
            background-image: url("_static/turnpike-logo.png") !important;
            background-repeat: no-repeat !important;
            background-position: 30px 50px;
        }

        .hero-unit div.section {
            padding-left: 150px !important;
        }
    </style>
</head>
<body>
    <a href="https://github.com/URXtech/turnpike-ios">
        <img style="position: absolute; top: 0; right: 0; border: 0;"
             src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"
             alt="Fork me on GitHub"></a>
    <div class="navbar">
        <div class="navbar-inner container-fluid" id="top-bar">
            <header class="row-fluid">
                <h1 class="span12" id="title"><img class="logo" src="_static/turnpike-logo.png" alt="Logo"/>
                    <a href="index.html">Turnpike</a>
                    <small>Structuring the web of mobile apps.</small>
                </h1>
            </header>
        </div>
    </div>
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="span3" id="sidebar">
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#prerequisite">Prerequisite</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-1-add-your-project-to-workspace">Step 1: Add your Project to Workspace</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-2-add-turnpike-to-workspace">Step 2: Add Turnpike to Workspace</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-3-test-compile-turnpike">Step 3: Test &amp; Compile Turnpike</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-4-linking-to-turnpike-binary-and-headers">Step 4: Linking to Turnpike Binary and Headers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-5-adding-a-custom-url-scheme">Step 5: Adding a Custom URL Scheme</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-6-setting-up-turnpike-in-your-app">Step 6: Setting up Turnpike in your App</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-7-feel-the-magic-make-sure-it-works">Step 7: Feel the Magic (Make sure it works)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#bonus-step-keeping-up-to-date-with-urx-turnpike">Bonus Step: Keeping Up-To-Date with URX Turnpike</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="enabling-mobile-deeplinking.html">Enabling Mobile Deeplinking</a></li>
<li class="toctree-l1"><a class="reference internal" href="mapping-routes.html">Mapping Routes to Destinations</a></li>
<li class="toctree-l1"><a class="reference internal" href="route-requests.html">Route Requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="filter-chains.html">Filters &amp; Filter Chains</a></li>
</ul>

                <hr/>
            </div>
            <div class="span9" id="body">
                
  <div class="section" id="installation">
<h1>Installation</h1>
<p>This installation tutorial will show you how to add URX Turnpike to your existing
project, and how to keep it up-to-date.</p>
<div class="section" id="prerequisite">
<h2>Prerequisite</h2>
<p>With Turnpike, we&#8217;ll be using <a class="reference external" href="http://git-scm.com/%20Git">Git</a> to
manage versions. If you haven&#8217;t used Git before, I recommend running
through <a class="reference external" href="http://try.github.com/%20Try%20Git">Try Git</a>, a quick Git
tutorial. You must have Git installed to complete this tutorial.</p>
</div>
<div class="section" id="step-1-add-your-project-to-workspace">
<h2>Step 1: Add your Project to Workspace</h2>
<p><strong>Note: You may skip to step two if you are already developing your App
in a workspace.</strong></p>
<p>Starting with Xcode 4, Apple introduced the concept of
<a class="reference external" href="http://developer.apple.com/library/ios/#featuredarticles/XcodeConcepts/Concept-Workspace.html%20Apple%20Workspace%20Notes">Workspace</a>
management. This took the prior concept of Project Management, and
allowed encapsulated projects, and shared documents, to exist in a space
together so you can work on, and reference them, simultaneously.
Projects in a Workspace also share a build directory, making it easy to
link to binaries of projects in the workspace.</p>
<p>To start, create a folder to house our workspace. Because my app is
called <tt class="docutils literal"><span class="pre">TestApp</span></tt>, I will create a folder called <tt class="docutils literal"><span class="pre">TestAppWorkspace</span></tt>,
where all my dependencies will live. However if you have a single code
base for multiple apps, you may want to have all of your apps in the
same Workspace. I only have one, so this will be <tt class="docutils literal"><span class="pre">TestAppWorkspace</span></tt>.</p>
<div class="figure">
<img alt="Create Workspace folder" src="_images/1.png" />
<p class="caption">Create Workspace folder</p>
</div>
<p>In Xcode, Go to File-&gt;New-&gt;Workspace, or press Control + Command + N, to
create a new Workspace, and save it in the folder we just created with
the name of your Workspace.</p>
<div class="figure">
<img alt="Create Workspace" src="_images/2.png" />
<p class="caption">Create Workspace</p>
</div>
<p>Now that you have a Workspace, we need to put some projects into it!
Lets start with your existing project.</p>
<p>Before we add it to the Workspace in Xcode, let&#8217;s move the project
folder into the Workspace folder, just to keep the organization cleaner
and not have your Workspace&#8217;s managed projects all over the place</p>
<div class="figure">
<img alt="Move project to workspace folder" src="_images/3.png" />
<p class="caption">Move project to workspace folder</p>
</div>
<p>Go to File-&gt;New-&gt;Add Files to &#8220;TestAppWorkspace&#8221; (where
&#8220;TestAppWorkspace&#8221; is your workspace), or press Option + Command + A,
and you&#8217;ll be able to select files. Navigate to your App&#8217;s
<tt class="docutils literal"><span class="pre">.xcodeproj</span></tt> file and select that. Make sure &#8220;Copy items into
destination group&#8217;s folder (if needed)&#8221; is checked, and click add.</p>
<div class="figure">
<img alt="Add project to Workspace in Xcode" src="_images/4.png" />
<p class="caption">Add project to Workspace in Xcode</p>
</div>
</div>
<div class="section" id="step-2-add-turnpike-to-workspace">
<h2>Step 2: Add Turnpike to Workspace</h2>
<p>Now that you have your project in a workspace, open your Terminal and
navigate to your Workspace folder. Once there, run
<tt class="docutils literal"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://github.com/URXtech/turnpike-ios.git</span></tt> and you should
have the latest stable version of URX Turnpike (for iOS) in your
Workspace Folder.</p>
<p><strong>Note: If you have already cloned a version of Turnpike, skip to the
last step on maintenance to update it before continuing.</strong></p>
<div class="figure">
<img alt="Add project to Workspace in Xcode" src="_images/5.png" />
<p class="caption">Clone Turnpike</p>
</div>
<p>Next we need to add the Turnpike project as we did for our own App, so
in Xcode, go to File-&gt;New-&gt;Add Files to &#8220;TestAppWorkspace&#8221; (where
&#8220;TestAppWorkspace&#8221; is your workspace), or press Option + Command + A,
and this time select <tt class="docutils literal"><span class="pre">Turnpike.xcodeproj</span></tt> in the <tt class="docutils literal"><span class="pre">turnpike-ios</span></tt>
folder.</p>
<div class="figure">
<img alt="Add Turnpike to Workspace" src="_images/6.png" />
<p class="caption">Add Turnpike to Workspace</p>
</div>
</div>
<div class="section" id="step-3-test-compile-turnpike">
<h2>Step 3: Test &amp; Compile Turnpike</h2>
<p>First we want to compile Turnpike into a binary. On the top bar of the
editor window, under &#8220;Scheme&#8221;, select &#8220;Turnpike&#8221;, and select a simulator
to run on. Try giving the tests a run (Command + U), and the console
should report that everything ran fine.</p>
<p>Although running the test involved Build Phases, we didn&#8217;t get a binary
from it, as evidenced by expanding the Products group in the Turnpike
project, and seeing that <tt class="docutils literal"><span class="pre">libTurnpike.a</span></tt> is red, meaning Xcode can&#8217;t
find it.</p>
<div class="figure">
<img alt="Test Turnpike" src="_images/7.png" />
<p class="caption">Test Turnpike</p>
</div>
<p>With static libraries, like Turnpike, tests can only be performed on the
simulator, while binaries can only be compiled by targeting actual
device architecture, so select &#8220;iOS Device&#8221; under Turnpike&#8217;s schema
(&#8220;iOS Device&#8221; may have the name of your iOS device if it&#8217;s plugged into
your computer), and build Turnpike (Command + B). <tt class="docutils literal"><span class="pre">libTurnpike.a</span></tt>
should now be black.</p>
</div>
<div class="section" id="step-4-linking-to-turnpike-binary-and-headers">
<h2>Step 4: Linking to Turnpike Binary and Headers</h2>
<p>This next part is a little more complicated, but follow along, and it&#8217;ll
be easy.</p>
<p>Now that it&#8217;s built we need to tell our own App to use Turnpike. First
lets point to Turnpike&#8217;s headers so Xcode can know about them and not
get upset when we claim they exist.</p>
<p>In Xcode, click on your project settings, and select your &#8220;Project&#8221; (not
&#8220;Target&#8221;). Select the &#8220;Build Settings&#8221; tab and in the search field,
search for &#8220;User Header Search Paths&#8221;. You should see &#8220;User Header
Search Paths&#8221; show up. Double click on the rightmost portion of this row
to bring up a box with little + and - buttons. Hit the + button and type
<tt class="docutils literal"><span class="pre">../turnpike-ios/Turnpike</span></tt> (assuming your project is in the Workspace
directory, as it should be if you followed along).</p>
<div class="figure">
<img alt="Link to Turnpike Headers" src="_images/8.png" />
<p class="caption">Link to Turnpike Headers</p>
</div>
<p>Next, in your project settings, select your &#8220;Target&#8221;, and select the
&#8220;Build Phases&#8221; tab. In your &#8220;Link Binary With Libraries&#8221; phase, hit the
+ button and select <tt class="docutils literal"><span class="pre">libTurnpike.a</span></tt> from the list (under Workspace).</p>
<div class="figure">
<img alt="Link to static library" src="_images/9.png" />
<p class="caption">Link to static library</p>
</div>
</div>
<div class="section" id="step-5-adding-a-custom-url-scheme">
<h2>Step 5: Adding a Custom URL Scheme</h2>
<p>If your app doesn&#8217;t yet have a custom URL scheme you&#8217;ll need to have
your app register for one on the user&#8217;s device. Fortunately, this is now
easier than ever in Xcode. In your app&#8217;s project settings, select your
&#8220;Target&#8221;, and click on the info tab. There, you should expand the &#8220;URL
Types&#8221; section. If you already have a custom URL registered, you&#8217;ll see
it there, and if not, this will be empty and say &#8220;No URL Types&#8221;.</p>
<p>Click the + button to create a new URL Type. Most of this is not
important to us, as it deals with file handling. What is important is
the Identifier and URL Schemes fields.</p>
<p>For both these fields, you want to enter your App&#8217;s Bundle Identifier in
<a class="reference external" href="http://en.wikipedia.org/wiki/Reverse_domain_name_notation%20Reverse%20Domain%20Name%20Notation">reverse domain name
style</a>.
This is recommended practice by Apple (although even they are guilty of
not doing this in their sample app) as behavior for collisions is
undefined. You can find your bundle identifier by switching to the
&#8220;Summary&#8221; tab in your &#8220;Target&#8221;.</p>
<p><strong>Note: Even if you already have a URL schema registered, we recommend
you register one in the reverse domain name style and use that one for
creating deep links. This will prevent any non-malicious collisions, and
is what we recommend as best practice.</strong></p>
<div class="figure">
<img alt="Create URL Schema" src="_images/10.png" />
<p class="caption">Create URL Schema</p>
</div>
</div>
<div class="section" id="step-6-setting-up-turnpike-in-your-app">
<h2>Step 6: Setting up Turnpike in your App</h2>
<p>The hard part is all finished, now you just need to tell your app what
routes you want to register and when to invoke a route.</p>
<p>Open up your <tt class="docutils literal"><span class="pre">AppDelegate.m</span></tt> file (in my case <tt class="docutils literal"><span class="pre">TAAppDelegate.m</span></tt>),
and under the first <tt class="docutils literal"><span class="pre">#import</span></tt> statement, add
<tt class="docutils literal"><span class="pre">#import</span> <span class="pre">&lt;Turnpike/Turnpike.h&gt;</span></tt>.</p>
<p>In your
<tt class="docutils literal"><span class="pre">-</span> <span class="pre">(BOOL)application:(UIApplication</span> <span class="pre">*)application</span> <span class="pre">didFinishLaunchingWithOptions:(NSDictionary</span> <span class="pre">*)launchOptions</span></tt>
method, you will register routes and filters. For the sake of this
tutorial we won&#8217;t get into Filters, but they are powerful ways to put
logic on top of your routing. In this method we&#8217;ll add a test route
which will print &#8220;Hello World!&#8221; to the console. Add:</p>
<div class="highlight-python"><pre>// Override point for customization after application launch.
[Turnpike mapRoute:@"hello" ToDestination:^(TPRouteRequest *request) {
    NSLog(@"Hello World!");
}];</pre>
</div>
<p>The last thing we have to do is let Turnpike pick up the incoming URL.
To do this, we&#8217;ll need our AppDelegate to implement
<tt class="docutils literal"><span class="pre">-</span> <span class="pre">(BOOL)application:(UIApplication</span> <span class="pre">*)application</span> <span class="pre">openURL:(NSURL</span> <span class="pre">*)url</span> <span class="pre">sourceApplication:(NSString</span> <span class="pre">*)sourceApplication</span> <span class="pre">annotation:(id)annotation</span></tt>
(and
<tt class="docutils literal"><span class="pre">-</span> <span class="pre">(BOOL)application:(UIApplication</span> <span class="pre">*)application</span> <span class="pre">handleOpenURL:(NSURL</span> <span class="pre">*)url</span></tt>
if you&#8217;re targeting iOS &lt; 4.2).</p>
<p><strong>Note:
```- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation``
will be called instead of
``- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url``
on iOS &gt;= 4.2 devices. If you want to support older devices, implement
both.</strong></p>
<p>In your <tt class="docutils literal"><span class="pre">openURL</span></tt> method, all you need to add is
<tt class="docutils literal"><span class="pre">[Turnpike</span> <span class="pre">resolveURL:url];</span></tt> and return <tt class="docutils literal"><span class="pre">YES</span></tt>.</p>
<div class="figure">
<img alt="Setting up your App Delegate" src="_images/11.png" />
<p class="caption">Setting up your App Delegate</p>
</div>
<p>Congratulations, you have now added Deeplinking to your app!</p>
</div>
<div class="section" id="step-7-feel-the-magic-make-sure-it-works">
<h2>Step 7: Feel the Magic (Make sure it works)</h2>
<p>Lets do a quick test to make sure it works. Build and Run your app on
the simulator or your device. Go to Safari and enter your URL Schema +
&#8221;:hello&#8221; and hit &#8220;Go&#8221;. For my app this is &#8220;<tt class="docutils literal"><span class="pre">com.urx.TestApp:hello</span></tt>&#8221;.</p>
<div class="figure">
<img alt="Deeplinking from Mobile Safari" src="_images/12.png" />
<p class="caption">Deeplinking from Mobile Safari</p>
</div>
<p><strong>Note: this could also be com.urx.TestApp://hello,
com.urx.TestApp:///hello or just com.urx.TestApp:hello. Leading
slashes after the colon are ignored, and the route in this case, is just
hello.</strong></p>
<p>This should quickly switch to your app and in your Xcode console, you
should see hello world. Congratulations, you&#8217;ve integrated URX Turnpike!
Time for cookies!</p>
<div class="figure">
<img alt="Hello World" src="_images/13.png" />
<p class="caption">Hello World</p>
</div>
</div>
<div class="section" id="bonus-step-keeping-up-to-date-with-urx-turnpike">
<h2>Bonus Step: Keeping Up-To-Date with URX Turnpike</h2>
<p>Updating Turnpike is easy! Just open up your console, navigate to your
Turnpike directory, then run <tt class="docutils literal"><span class="pre">git</span> <span class="pre">pull</span> <span class="pre">origin</span> <span class="pre">master</span></tt> and the newest
version should come straight from GitHub.</p>
<div class="figure">
<img alt="Updating From GitHub" src="_images/14.png" />
<p class="caption">Updating from GitHub</p>
</div>
<p>After updating, make sure to re-build your Turnpike binary in Xcode.
Select Turnpike from the scheme list, and make sure you&#8217;re building for
&#8220;iOS Device&#8221; (or the name of the device you have plugged into your
computer). Press Command + B to build, and you&#8217;re all updated!</p>
</div>
</div>


            </div>
        </div>
        <hr/>
        <footer>
            &copy; Copyright 2013, URX.
            Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>
            1.2b1.
        </footer>
    </div>
</body>
</html>


